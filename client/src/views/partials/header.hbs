<style>
  .form-user {
    display: flex;
    flex-direction: column;
    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
    background-color: #fff;
    padding: 30px 30px 60px 30px;
    width: 240px;
    border-radius: 8px;
    position: absolute;
    top: 94px;
    right: 86px;
    display: none;
}

.show {
  display: flex;
}
</style>

<!-- Header -->
<header class="color">
    <div class="header_top_Container d-flex justify-content-between">
      <ul class="header_top header_top_left d-flex list-unstyled">
        <li><a href="">Chợ tốt</a></li>
        <li><a href="">Nhà tốt</a></li>
        <li><a href="">Chợ Tốt xe</a></li>
        <li><a href="">Việc làm tốt</a></li>
      </ul>
      <ul class="header_top header_top_right d-flex list-unstyled">
        <li><a href="">Đóng góp ý kiến</a></li>
        <li><a href="">Tải ứng dụng</a></li>
        <li><a href="">Trợ giúp</a></li>
        <li><a href="">Giành cho người bán</a></li>
      </ul>
    </div>
    <div
      class="header_container d-flex justify-content-between align-items-center"
    >
      <div
        class="header_container_section start justify-content-between d-flex"
      >
        <a href="/" class="header_logo ">
          <img class="w-100" src="/imgs/main_logo.png" alt="Đây là logo" />
        </a>
        <ul class="list list-unstyled">
          <li>
            <a class="list_all">
              <i class="fa-solid fa-bars"></i> Danh mục
              <i class="ti-angle-down"></i>
            </a>
          </li>
          <ul class="list_c2">
            <li>
              <a href="/category=1000">Xe cộ
                <span class="icon_menu"><i class="fa-solid fa-angle-right"></i></span>
              </a>
              <ul class="list_c3 bg-white">
                <li><a href="/category=1001">Xe máy </a></li>
                <li><a href="/category=1002">Xe đạp </a></li>
              </ul>
            </li>
            <li>
              <a href="/category/=1003">
                Đồ điện tử
                <span class="icon_menu">
                  <i class="fa-solid fa-angle-right"></i>
                </span>
              </a>
              <ul class="list_c3 bg-white">
                <li><a href="/category=1004">Điện thoại, Laptop </a></li>
                <li><a href="/category=1005">Phụ kiện điện tử </a></li>
              </ul>
            </li>
            <li>
              <a href="/category=1006">
                Đồ dùng học tập
                <span class="icon_menu"><i class="fa-solid fa-angle-right"></i></span>
              </a>
              <ul class="list_c3 bg-white">
                <li><a href="/category=1007">Bàn, ghế </a></li>
                <li><a href="/category=1008">Đèn học </a></li>
              </ul>
            </li>
            <li><a href="/category=1009">Đồ gia dụng</a></li>
            <li><a href="/category=1010">Đồ trang trí </a></li>
            <li><a href="/category=1011">Thời trang </a></li>
          </ul>
        </ul>
      </div>
      <div class="header_container_section middle">
        <form class="search_form" action="/search" method="post">
          <input class="search" type="search" name="keyword" placeholder="Tìm kiếm sản phẩm"/>
          <button type="submit" class="search_icon" style="border: none;">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
      </div>
      <ul
        class="header_container_section end d-flex list-unstyled justify-content-center align-items-center"
      >
        <li class="extention">
          <a href=""><i class="active-icon fa-regular fa-bell"></i> </a>
        </li>
        <li class="extention">
          <a href=""><i class="active-icon ti-comment-alt"></i></a>
        </li>
        <li class="extention">
          <a href=""><i class="active-icon ti-bag"></i></a>
        </li>
        <li class="extention">
          <a href=""
            ><i class="active-icon fa-solid fa-comment"></i> Tin nhắn</a
          >
        </li>
        <li class="extention acc">
          <a onclick="openSubMenu()">
            <i class="active-icon fa-solid fa-user acc-name"></i> Tài khoản
            <form class="form form-user">
              <a href="/user/" class="btn btn-info" style="margin-bottom: 18px; color:white;">Xem thông tin tài khoản</a>
              <a href="/user/logout" class="btn btn-info" style="color: white;">Đăng xuất</a>
            </form>
            {{!-- <i class="ti-angle-down"></i --}}
          </a>
        </li>
        <li class="extention push_news">
          <a href=""><i class="fa-regular fa-pen-to-square"></i> Đăng tin</a>
        </li>
      </ul>
    </div>
  </header>

  <section id="modal_chat" class=" col-md-8 col-lg-6 col-xl-4" style="position: fixed;
z-index: 10;
bottom: 10px;
width: 20%;
right: 5%;">
<div class="modal_chat_short show_off"><i class="fa-regular fa-comment-dots" style="font-size: 60px;float: right;"></i></div>

  <div class="card modal_chat_body " id="chat1" style="border-radius: 15px;">
    <div
      class="card-header d-flex justify-content-between align-items-center p-3 bg-info text-white border-bottom-0"
      style="border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <!-- <i class="fas fa-angle-left"></i> -->
      <p class="mb-0 fw-bold">Live chat</p>
      <div class="icon_right d-flex align-items-center">
        <i class="fa-solid fa-sort-down" style="display: block; font-size: 16px;cursor: pointer;padding: 0 4px;"></i>
        <i class="fas fa-times" style="display: block; margin-left: 5px;cursor: pointer;padding: 0 4px;"></i>
      </div>
    </div>
    
    
    <div class="card-body">

      <div class="d-flex flex-row justify-content-start mb-4">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
        <div class="p-3 ms-3" style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
          <p class="small mb-0">Hello and thank you for visiting MDBootstrap. Please click the video
            below.</p>
        </div>
      </div>

      <div class="d-flex flex-row justify-content-end mb-4">
        <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb;">
          <p class="small mb-0">Thank you, I really like your product.</p>
        </div>
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava2-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
      </div>

      <div class="d-flex flex-row justify-content-start mb-4">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
        <div class="ms-3" style="border-radius: 15px;">
          <div class="bg-image">
            <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/screenshot1.webp"
              style="border-radius: 15px;" alt="video">
            <a href="#!">
              <div class="mask"></div>
            </a>
          </div>
        </div>
      </div>

      <div class="d-flex flex-row justify-content-start mb-4">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
          alt="avatar 1" style="width: 45px; height: 100%;">
        <div class="p-3 ms-3" style="border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
          <p class="small mb-0">...</p>
        </div>
      </div>

      <!-- <div class="form-outline">
        <textarea class="form-control" id="textAreaExample" rows="4"></textarea>
        <label class="form-label" for="textAreaExample">Type your message</label>
      </div> -->
      <div class="text-muted d-flex justify-content-start align-items-center pe-3 pt-3 mt-2">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
          alt="avatar 3" style="width: 40px; height: 100%;">
        <input type="text" class="form-control form-control-lg" id="exampleFormControlInput2" style="font-size: 14px;"
          placeholder="Type message">
        <a style="padding: 0 4px;" class="ms-3" href="#!"><i class="fas fa-paper-plane"></i></a>
      </div>
    </div>
  </div>
    
</section>
<!-- Đóng mở chat -->
<script>
    var modal_chat= document.querySelector('#modal_chat');
    var down = modal_chat.querySelector('.fa-solid.fa-sort-down');
    var close = modal_chat.querySelector('.fas.fa-times')
    var modal_chat_body = modal_chat.querySelector('.modal_chat_body');
    var modal_chat_short = modal_chat.querySelector('.modal_chat_short');
    close.onclick = function(){
      modal_chat.style.display='none';
    }
    down.onclick = function(){
      modal_chat_body.classList.add('show_off');
      if(modal_chat_short.classList.contains('show_off')){
        modal_chat_short.classList.remove('show_off');
      }
    }
    modal_chat_short.onclick = function(){
      modal_chat_body.classList.remove('show_off');
      modal_chat_short.classList.add('show_off');

    }
</script>

{{!-- check account --}}
<script>
  const checkLogin = () => {
  const cookie = document.cookie;

  const arrToken = cookie.split(' ');
  let cookies = {};

  arrToken.map((e) => {
    let sub = e.trim().split('=');
    cookies[sub[0]] = sub[1];
  });

  const acc = document.querySelector('.acc')
  if (cookies.accessToken) {
    acc.innerHTML = '<a onclick="openSubMenu()"><i class="active-icon fa-solid fa-user acc-name"></i> Tài khoản <form class="form form-user"><a href="/seller" class="btn btn-info" style="margin-bottom: 18px; color:white;">Xem thông tin tài khoản</a><a href="/logout" class="btn btn-info" style="color: white;">Đăng xuất</a></form></a>'
  } else {
    acc.innerHTML = '<a href="/login"><i class="active-icon fa-solid fa-user acc-name"></i> Tài khoản</a>'
  }
}  
checkLogin()
</script>

<script>
  const openSubMenu = () => {
    const subMenu = document.querySelector('.form-user')
    subMenu.classList.toggle('show')
  }
</script>